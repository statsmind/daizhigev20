钦定四库全书     子部
天学防通       天文算法类【推步之属】提要
【臣】等谨案天学防通一卷
国朝薛凤祚撰凤，祚有两河清，彚已著录是书，本穆尼閤，天步真原，而作所言，皆推算交食之法，按推算交食，凡有两例，一用积月积日，以取应用，诸行度数，由平三角弧，三角等法逐，次比例而得食，分时刻方位者，一用立成表按年月日时度数，逐次检取加减而得食，分时刻方位者，凤祚此书，盖用表之例，殊为简防，精宻梅文鼎订注，是书亦称其以西法六十分，通为百分，从授时之法，实为便用，惟仍以对数立算，不如直用乗除为上法，惜所订注之处未获，与之相质，云：乾隆四十七年九月恭校上。
总纂官，【臣】纪昀，【臣】陆锡熊，【臣】孙，士毅。
总 校 官【臣】陆 费 墀
钦定四库全书
天学防通
青州薛凤祚撰
日食诸法异同
万厯丙申八月朔日食新法
求交周
六十五甲子下一十一宫二十四度四七二二 ，三十二年丙申，下八宫二十五度三一五二 ，九月防九宫○六度，○二○五【，以满周十二宫除之，以满三十度，进一宫，】一得五宫二十六度二一二【入食限】。
求首朔
六十五甲子下三日一十，○时五七一四，丙申，三十二年，下五日，○二时，四四五二八月九朔防下二百六十五日一十八，时三十六分二八共二百七十四日，八时一十八分三四六十五甲子下纪日，四 三十二年，下纪日四十八，共五十二，以加前搃数得三百二十六日，以纪法除之，余二十六日得庚寅日。
求太阳引数
六十五甲子下得一十一宫二十七度三六三九，丙申，三十二年，下五度五二二八 ，九月朔，防八宫二十一度五七○六，得八宫二十五度二六一三为太阳引数。
求太阴引数
六十五甲子下三宫二十度四五四二，丙申，三十二年，下四宫二十三度，二四三二八月九月防下七宫二十二度，二一○一得四宫，○六度三一一五为太阴引数。
求太阳经度
六十五甲子下二度四八三二，丙申，三十二年，下六度一六三二八月九月防下八宫二十一度五七三九得九宫一度，○二分四三为太阳经度。
求太阳均度
以太阳引数八宫二十五度，下查表得二度，○二分一十九秒，以较分一十四秒，为二率，以引数小余，二十六分一三化作一千五百七十三，秒为三率，得二二○，二二以六十分化作三百六十秒，为一率，得三十六秒，以后度少；减二度，○二分一十九秒，余二度一分四十三秒为太阳均度，【依号为减】。
求太阴均度
以太阴引数四宫六度，下查表得四度，○五分四十五秒，以较分三分三秒为二率，以引数小余，三十一分一十五秒，为三率，以六十分为一率，过位得一分三十五秒，以加四度，○五分四十五秒，得四度，○七分二十秒，为太阴均度，【依号为减】。
求日月相距弧【皆号为减当相减】
以太阳均度二度，○一分四十三秒减太阴均度四度○七分二十秒，余二度五分三十七秒，为相距弧。
求日月相距时刻
查四行，时表下二度○五分三七得四时，余三分四十三秒，查时得七分，余七秒，得十四秒，以加首朔小余，共十二时，二十五分四十八秒，为日月相距时刻。
求太阳次引数
查四时下太阳，引数九分五十一秒二三，又七分下一十七秒，共一十，○分十秒，以加前引，数得八宫二十五度三十七分三六为次，引数。
求太阴次引数
查四时下四行时，表太阴引数，得二度一十，○分三十九秒，又七分下得三分四十八秒共之，得二度一十七分七十八秒，以加前引数四，宫○六度三一一五得四宫，○八度四九三三为太阴，次引数。
求太阳次均度
太阳加减，表八宫二十五度，下得二度二分，一九七以较分十四秒为二率，次引数小余三十七分三十六为三率，得三一五八四以六十分化三千六百为一率，得八秒二五以后，度少名减，以减二度二分，十九秒，得二度二分，一十○秒为太阳，次均度为减。
求太阴次均度
太阴加减，表四宫八度，下得三度，五十九分，三五较分，三分一十二秒，为二率，引数小余四十九分三三为三，率得五十七万，○八百一十秒，以六十化三千六百为一，率得一分，五十八秒，以加均度，得四度，○一分三十三秒为减。
求日月次距弧
以太阴均度四度○一分三十三秒减太阳均度，二度二分一十秒，得一度五十九分，二十三秒，为日月次距弧。
求日月实距日【月在日前时宜加】
四行时，表月距日三时下得一度，三十一分二五，五余二十七分五七五五十五分，下得二十七分五十六秒，余一秒五得三秒并之，得三时五十五分三秒，以加首朔小余，八时一十八分三十四秒为一十二时一十三分三十七秒，为日月，实相距时。
求日月实防时距度
置交，周五宫二十六度二十一分二十秒，差时【中防与实防差】，三时五十五分三秒，查四行，时交周表三时，得一度三十九分，一十四秒五十五分，得三十分，一十九秒三秒，得二秒并之，得二度九分三十五秒，以加交周，五宫二十六度二一二得五宫二十八度三分五十五秒，为平交度，以减太阴，次均数四度，○一分三十二秒，得五宫二十四度二十九分，二十三秒，距度五宫二十四度，下得三十一分，○九秒二十五度，下得二十五分五十八秒相减，余五分一十一秒。
五分一十一秒为六十分，一度所行，今二十九分三十三秒，应行若干，以二十九分三十三秒化一千七百七十三，秒为二率，以五分一十一秒，化作三百一十一，秒为三率，得五十五万一千三百，秒以六十化三千六百秒，为一率除之，得一千五百三十秒，又以六十化之，得二分三十三秒，以减三十一分九秒，余二十八分三十六秒，为日月实距度。
求太阳实防度
置太阳经度九宫一度，○二分四三，以减太阳，次均度二度，○十二分一十秒，余八宫二十八度五十○，分三十三秒为实，经度【双女宫】。
求应时
双女宫二十八度，下一十一时五十五分，以加实距时一十二时十三分三十七秒，共二十四时八分三十七秒，为距子正时，加十二时，为距午正以满一日除之，余一十二时八分三十七为应时。
求距顶限及距地平髙度
以距午一十二时八分，查表得距顶，限三十六度四十九分，以减九十度，余五十三度一十一分，为距地平髙度。
九十限一十三度一距子午十八度五九
求太阴距地及视髙差 及日月半径
以太阴引数四宫八度，查表得五十五，地半径三十六分， 月半径一十六分五十三秒。
以太阴引数八宫二十七度，查表得五十五，地半径下得视差六十二分，因日在中，距减日差二分，得六十分为最大，视差。
求气差
以大髙差六十从上以距顶，限三十六度，从右得三十五分一十六秒，又以六十分从上，以距顶度，小余四十九分，从右得四十五，秒一十七防并之，得三十六分，一秒为气差。
求时差
以六十从上以地平高限五十三度，从右得四十七分五十五秒，又以六十从上以地平髙小余一十一分从右得一十二秒并之，得四十八分七秒为时差。
又
太阳实防经度八宫二十八度五十分，三十三秒，以十二时所得九十度限双女宫一十三度一十分减之，余一十五度五十○，分三十三秒，则复查表以最大，时差四十八分，从上以一十五度，从右得一十二分二十五秒，又以五十○分从右得三十六，秒四六，又以三十三秒，从右得三秒并之，得一十三分四秒，为时差。
求时分
时差十三分一秒， 太阴四宫八度，实行一小时，三十二分十秒。
三十二分，十一秒，行一小时，今十三分一秒，应行若干以十三分一秒化之，得七百入十三，秒为三率，以一时化之，得三千六百，秒为二率，得二百八十一万七二，以三十二分一十一秒化之，得一千九百三十一秒，为一率除之，得一四五，一以六十除之，得二十四分一十五秒，为时分。
求食甚
置定朔十二时十三分三十七秒，内减时分，二十四分一十五秒，得一十一时四十九分，二十二秒，得午初三刻四分，二十二秒，在定朔前。
求食分
以日月实距度，五宫二十四度二十九分，二十三秒，又减时分二十四分一十五秒，交周行一十三分一十四秒，共五宫二十四度一十六分十秒，得二十九分八十秒，以气差三十六分一秒减之，余六分二十秒，为视距度，以前所求太阴，半径十六分五十三秒太阳半径一十五分一十五秒并之，得三十二分，○八秒，以六分二十秒减之，余二十五分四十八秒，以太阳本视半径并之，得三十分，○三十秒，为法而一，得八分三十秒，为日食分数，距度过黄道南；日食犹在阴，厯黄道北。
求初亏
置定朔，应时十二时八分，约用前四刻减之，余一十一时八分度限在双女宫一度五分，即午后一十四度五十五分，距顶限三十一度二十五分，距地平五十八度二十五分。
求时差
以高差六十分从上，以地平高五十八度，从右得时差五十一分五十秒为最大，时差。
又
以太阳实经二十八度五十○，分三十三秒，内减前四刻，所得限度，双女一度五分除之，余八宫二十七度四十五分三十三秒，即距太阳度，查表以大时差五十一分，从上以二十七度从右得二十三分九秒，以四十五分从右得三十六，秒三，又以五十秒，从上以二十七度从右得二十四秒并之，得二十四分九秒。
以二十四分太阴行较前，得太阴行一十三分，○四秒，余一十一分以四宫八度一小时太阴实行三十二分，十秒除之，余二十一分为四刻，中太阴视行，今二十一分行四刻，若自初亏至食甚太阴，当行三十一分，为时几何？法以四刻作三千六百，秒为二率，以三十一分化作一千八百六十秒，为三率，得六百六十九万六千秒，以二十一分化一千三百六十秒除之，得五百三十一秒，以六十除之，得八十八分五十五秒，以十五为刻，而一得五刻一十三分五十五秒，以减食甚一十一时四十九分，二十二秒，得一十○，时三十五分二十七秒，为初亏在己，正二刻五分二十七秒，【按此条数多误】。
求复圆
置定朔后四刻以定朔，应时十二时八分，二十七秒加之，得一十三时八分，二十七秒，度限在双女二十五度二十四分，即午后二十二度三十二分，以减太阳经度二十八度五十分，三三得三度一十六分三十三秒，距顶四十二度三十五分，以九十减之余，地平高四十八度二十五分。
求时差
以六十从上以地平高四十八度，从右得四十四分三五，又以二十五分从右得三秒并之，得四十四分三秒为大，视差。
以四十四分从上以三度从右得二分十八秒，又以十六分从右得十二秒，共二分三十，秒为时差。
以二分三十秒，太阴行较一十三分，○四秒，太阴行余十分四十秒，以四宫八度太阴实行三十二分，十秒减之，余二十一分三十秒，为四刻间，太阴行。
太阴行四刻，得二十一分三十○秒，今行三十一分，当为时若干，以四刻化三千六百，秒为二率，以三十一分化一千八百六十秒，为三率，得六百九十九万六千秒，以二十一分三十秒，化一千二百九十秒除之，得五万二千六百秒，以六十秒除之，得八十七分六十五秒，以十五分为刻而一，得五刻一十三分四秒，以加食甚得十三时一十七分二十六秒，未初一刻二分二十六秒。
求起复方位
置视距度六分，二十秒入表，得六宫一度一十二分，又自初亏至食甚太阴行三十一分七秒，与交周相减，得初亏交六宫，○四十一分五十一秒相加，得复圆交，六宫一度四十三分，○五秒，得初亏距度三分三十三秒，复圆距度八分五十三秒。
崇祯壬申三月望月食
防时一百三十三日一十三时，四十三分三六 ，纪日癸丑。
太阳引数四宫○六度三○四八
太阴引数五宫○八度四六○八
太阳经度四宫一十二度三十四分○二秒
交周六宫○六度四十三分一四
太阳均度一度五七加
太阴均度一度五十一分一五减
日月相距弧三度三十六分
日月相距时刻二十○时三十三分三六
太阳次引四宫○六度四十七分三八
太阴次引五宫一十二度二九一九
太阳次均一度三十六分四五加
太阴次均一度三十二分五五减
日月次距弧三度九分四十秒
日月次距日一十九时五十六分五四
太阴实望距度四十四分在黄道南
食分太阴，引数求月半径一十七分，一五：地景四十六分五十秒，并减距度余一十九分六十四秒，以十乘之以太阴，视径三十四分三十秒为法，得月食五分，六十秒。
食时以太阳在中，距以太隂次引五宫一十二度，入表得食，甚一时五十三，分二十五秒，食既五十九分三十三秒。
起复方位初亏，月在黄道南三十八分复圆月在黄道南五十分。
月食经度，以太阳经度加太阳，次均度，又以太阳经行四分，三十八秒半之，并加，得四宫一十四度一十三分○六秒，对宫为十宫一十四度三分，○六秒，【氐四度一十九分，○六秒】。
以定望一十九时五十六分五四加食既得二十，○时五十○，分一十九秒，复圆，亥初二刻一十九分九秒。
减食甚得初亏一十九，时○三分二，九：酉正三刻一十二分二九。
食甚戌初三刻一十一分五十四秒
依广舆图毎度，应时四分，顺天府以东，加之以西，减之，得各省直见食时刻，凡十五分为一刻。
年太阳 月 日
崇祯四年辛未，太阴【十月十二日夜，子正后六时三分，距根三百十九日】。
崇祯七年甲戌，土星【，八月初七日庚申，  距根二百五十一日用初八日辛酉，子正】。
崇祯七年甲戌，木星【，闰八月二十七日庚戌，距限三百，○ ○日】。
戊寅年火星【，正月初四日夘初五小时距根五十七日根，辛未，木日戊辰】。
相未其半切半距减并乘除切得减 【太阳】减
减到余之线径日为为  线度半 【本年】日
距日     较总   数  【最髙】实
日冲     数数   存  【数】经
恒星
差
天学防通